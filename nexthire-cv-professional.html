<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexthire - CV Yarat</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0066FF;
            --primary-dark: #0052CC;
            --secondary: #00D4AA;
            --bg: #F8F9FC;
            --surface: #FFFFFF;
            --text: #1A1D29;
            --text-light: #6B7280;
            --border: #E5E7EB;
            --shadow: rgba(0, 102, 255, 0.08);
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .phone-container {
            width: 100%;
            max-width: 420px;
            background: var(--surface);
            border-radius: 32px;
            box-shadow: 0 20px 60px var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
            max-height: 800px;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 24px 24px 32px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }

        .logo {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .progress-container {
            position: relative;
            z-index: 1;
        }

        .progress-text {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 12px;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--secondary);
            border-radius: 10px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px var(--secondary);
        }

        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            gap: 12px;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-weight: 700;
            color: white;
            font-size: 16px;
        }

        .message-content {
            flex: 1;
        }

        .message-text {
            background: var(--surface);
            padding: 16px 20px;
            border-radius: 16px 16px 16px 4px;
            border: 1px solid var(--border);
            font-size: 15px;
            line-height: 1.6;
            color: var(--text);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .user-message {
            flex-direction: row-reverse;
        }

        .user-message .avatar {
            background: var(--text);
        }

        .user-message .message-text {
            background: var(--primary);
            color: white;
            border-radius: 16px 16px 4px 16px;
            border: none;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .button-grid.single-col {
            grid-template-columns: 1fr;
        }

        .option-btn {
            background: var(--surface);
            border: 2px solid var(--border);
            padding: 16px;
            border-radius: 16px;
            font-size: 15px;
            font-weight: 600;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.04);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .option-btn:active {
            transform: scale(0.98);
        }

        .option-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 16px;
        }

        .checkbox-btn {
            background: var(--surface);
            border: 2px solid var(--border);
            padding: 14px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
            text-align: center;
            position: relative;
        }

        .checkbox-btn.checked {
            background: rgba(0, 102, 255, 0.08);
            border-color: var(--primary);
            color: var(--primary);
        }

        .checkbox-btn.checked::after {
            content: '‚úì';
            position: absolute;
            top: 4px;
            right: 8px;
            font-size: 12px;
            font-weight: 700;
        }

        .input-area {
            padding: 20px 24px 24px;
            background: var(--surface);
            border-top: 1px solid var(--border);
        }

        .input-container {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .text-input {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid var(--border);
            border-radius: 16px;
            font-size: 15px;
            font-family: inherit;
            color: var(--text);
            transition: all 0.3s ease;
            background: var(--bg);
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--surface);
            box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.1);
        }

        .send-btn {
            width: 52px;
            height: 52px;
            border-radius: 16px;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
        }

        .send-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 16px 20px;
            background: var(--surface);
            border-radius: 16px 16px 16px 4px;
            border: 1px solid var(--border);
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-light);
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.5;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        .success-message {
            text-align: center;
            padding: 32px 24px;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: linear-gradient(135deg, var(--success) 0%, var(--secondary) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            animation: scaleIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes scaleIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .success-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text);
        }

        .success-text {
            font-size: 15px;
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .download-btn {
            width: 100%;
            padding: 18px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .download-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow);
        }

        .chat-area::-webkit-scrollbar {
            width: 6px;
        }

        .chat-area::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-area::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 10px;
        }

        .chat-area::-webkit-scrollbar-thumb:hover {
            background: var(--text-light);
        }

        @media (max-width: 480px) {
            .phone-container {
                border-radius: 0;
                height: 100vh;
                max-height: 100vh;
            }

            body {
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="header">
            <div class="logo">Nexthire</div>
            <div class="progress-container">
                <div class="progress-text">Sual 1 / 18</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 5%;"></div>
                </div>
            </div>
        </div>

        <div class="chat-area" id="chatArea">
            <div class="message">
                <div class="avatar">N</div>
                <div class="message-content">
                    <div class="message-text">
                        Salam! üëã<br><br>
                        M…ôn siz…ô CV yaratmaqda k√∂m…ôk ed…ôc…ôy…ôm.<br><br>
                        G…ôlin ba≈ülayaq! Adƒ±nƒ±z v…ô soyadƒ±nƒ±z n…ôdir?
                    </div>
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <input type="text" class="text-input" placeholder="M…ôs…ôl…ôn: R…ô≈üad M…ômm…ôdov" id="userInput">
                <button class="send-btn" id="sendBtn">‚û§</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script>
        const chatArea = document.getElementById('chatArea');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        let currentQuestion = 1;
        let selectedCheckboxes = [];

        let cvData = {
            // A. ≈û…ôxsi v…ô …ôlaq…ô
            fullName: '',
            birthYear: '',
            phone: '',
            hasWhatsApp: '',
            district: '',
            familyStatus: '',
            
            // B. ƒ∞≈ü se√ßimi
            desiredRoles: [],
            workType: '',
            preferredShifts: [],
            minSalary: '',
            
            // C. ƒ∞≈ü t…ôcr√ºb…ôsi
            previousWorkplace: '',
            previousRole: '',
            workDuration: '',
            leavingReason: '',
            
            // D. Bacarƒ±qlar
            skills: [],
            
            // E. Dil v…ô s…ôn…ôdl…ôr
            azerbaijaniLevel: '',
            russianLevel: '',
            hasID: '',
            militaryStatus: '',
            
            // F. Fiziki v…ô n√∂vb…ô uyƒüunluƒüu
            canStandLong: '',
            canLiftHeavy: '',
            acceptsNightShift: '',
            
            // G. ∆èl√ßatanlƒ±q
            canStartWhen: '',
            isPunctual: '',
            hasReference: ''
        };

        const questions = [
            // A. ≈û∆èXSƒ∞ V∆è ∆èLAQ∆è
            { text: 'Salam! üëã<br><br>M…ôn siz…ô CV yaratmaqda k√∂m…ôk ed…ôc…ôy…ôm.<br><br>G…ôlin ba≈ülayaq! Adƒ±nƒ±z v…ô soyadƒ±nƒ±z n…ôdir?', type: 'text', field: 'fullName', placeholder: 'M…ôs…ôl…ôn: R…ô≈üad M…ômm…ôdov' },
            { text: 'Hansƒ± ild…ô doƒüulmusunuz?', type: 'text', field: 'birthYear', placeholder: 'M…ôs…ôl…ôn: 1995' },
            { text: 'Telefon n√∂mr…ôniz?', type: 'text', field: 'phone', placeholder: '055 123 45 67' },
            { text: 'WhatsApp-ƒ±nƒ±z var?', type: 'buttons', field: 'hasWhatsApp', options: ['B…ôli', 'Xeyr'] },
            { text: 'Hansƒ± rayonda ya≈üayƒ±rsƒ±nƒ±z?', type: 'buttons', field: 'district', options: ['Yasamal', 'N…ôsimi', 'N…ôrimanov', 'Bin…ôq…ôdi', 'X…ôtai', 'S…ôbail', 'Suraxanƒ±', 'Dig…ôr'] },
            { text: 'Ail…ô v…ôziyy…ôtiniz? (ixtiyari)', type: 'buttons', field: 'familyStatus', options: ['Subay', 'Evli', 'Cavab verm…ôk ist…ômir…ôm'] },
            
            // B. ƒ∞≈û SE√áƒ∞Mƒ∞
            { text: 'Hansƒ± v…ôzif…ôd…ô i≈ül…ôm…ôk ist…ôyirsiniz? (1-2 variant se√ßin)', type: 'checkboxes', field: 'desiredRoles', options: ['Kassir', 'Satƒ±cƒ±', 'Anbardar', 'S√ºr√ºc√º', 'Y√ºkda≈üƒ±yƒ±cƒ±', 'M√ºhafiz…ô√ßi', 'T…ômizlik√ßi', 'Kuryer'] },
            { text: 'ƒ∞≈ü n√∂v√º?', type: 'buttons', field: 'workType', options: ['Tam ≈ütat', 'N√∂vb…ôli i≈ü', 'Yarƒ±m ≈ütat'] },
            { text: 'Hansƒ± n√∂vb…ôl…ôrd…ô i≈ül…ôy…ô bil…ôrsiniz? (bir ne√ß…ôsini se√ßin)', type: 'checkboxes', field: 'preferredShifts', options: ['S…ôh…ôr (08:00-16:00)', 'G√ºnd√ºz (12:00-20:00)', 'Ax≈üam (16:00-00:00)', 'Gec…ô (00:00-08:00)'] },
            { text: 'Minimum maa≈ü g√∂zl…ôntiniz? (AZN)', type: 'buttons', field: 'minSalary', options: ['300-500', '500-700', '700-1000', '1000+'] },
            
            // C. ƒ∞≈û T∆èCR√úB∆èSƒ∞
            { text: '∆èvv…ôlki i≈üiniz haradadƒ±r? (bo≈ü qoya bil…ôrsiniz)', type: 'text', field: 'previousWorkplace', placeholder: 'M…ôs…ôl…ôn: Bravo Market, Kontakt Home' },
            { text: 'Orada hansƒ± v…ôzif…ôd…ô i≈ül…ôyirdiniz?', type: 'text', field: 'previousRole', placeholder: 'M…ôs…ôl…ôn: Kassir' },
            { text: 'N…ô q…ôd…ôr i≈ül…ôdiniz?', type: 'buttons', field: 'workDuration', options: ['T…ôcr√ºb…ôm yox', '6 aydan az', '6-12 ay', '1-2 il', '2+ il'] },
            { text: 'Niy…ô ayrƒ±ldƒ±nƒ±z? (v…ô ya niy…ô yeni i≈ü axtarƒ±rsƒ±nƒ±z?)', type: 'buttons', field: 'leavingReason', options: ['A≈üaƒüƒ± maa≈ü', 'Uzaq m…ôsaf…ô', 'Qeyri-sabit qrafik', '≈û…ôxsi s…ôb…ôbl…ôr', 'ƒ∞lk i≈üim olacaq'] },
            
            // D. BACARIQLAR
            { text: 'Hansƒ± bacarƒ±qlarƒ±nƒ±z var? (se√ßin)', type: 'checkboxes', field: 'skills', options: ['M√º≈üt…ôri il…ô √ºnsiyy…ôt', 'Kassa t…ôcr√ºb…ôsi', 'R…ôf d√ºzm…ô', 'Anbar i≈üi', 'Aƒüƒ±r y√ºk qaldƒ±rma', 'Komanda i≈üi', 'POS terminal'] },
            
            // E. Dƒ∞L V∆è S∆èN∆èDL∆èR
            { text: 'Az…ôrbaycan dilini n…ô d…ôr…ôc…ôd…ô bilirsiniz?', type: 'buttons', field: 'azerbaijaniLevel', options: ['Ana dilim', 'Yax≈üƒ±', 'Orta'] },
            { text: 'Rus dili?', type: 'buttons', field: 'russianLevel', options: ['Yax≈üƒ±', 'Orta', 'Z…ôif', 'Bilmir…ôm'] },
            { text: '≈û…ôxsiyy…ôt v…ôsiq…ôniz var?', type: 'buttons', field: 'hasID', options: ['B…ôli', 'Xeyr'] },
            { text: 'H…ôrbi v…ôziyy…ôt? (ki≈üil…ôr √º√ß√ºn)', type: 'buttons', field: 'militaryStatus', options: ['Xidm…ôt ke√ßmi≈ü…ôm', 'T…ôxir…ôm var', 'Ya≈üa g√∂r…ô azadam', 'Qadƒ±nam'] },
            
            // F. Fƒ∞Zƒ∞Kƒ∞ V∆è N√ñVB∆è UYƒûUNLUƒûU
            { text: 'Uzun m√ºdd…ôt ayaqda i≈ül…ôy…ô bil…ôrsiniz?', type: 'buttons', field: 'canStandLong', options: ['B…ôli', '√á…ôtinlik √ß…ôk…ôr…ôm'] },
            { text: 'Aƒüƒ±r y√ºk qaldƒ±ra bil…ôrsiniz? (10-20 kq)', type: 'buttons', field: 'canLiftHeavy', options: ['B…ôli', 'Xeyr'] },
            { text: 'Gec…ô n√∂vb…ôsind…ô i≈ül…ôm…ôy…ô razƒ±sƒ±nƒ±z?', type: 'buttons', field: 'acceptsNightShift', options: ['B…ôli', 'Xeyr', 'B…ôz…ôn'] },
            
            // G. ∆èL√áATANLIK V∆è ETƒ∞BARLILIQ
            { text: 'N…ô vaxt i≈ü…ô ba≈ülaya bil…ôrsiniz?', type: 'buttons', field: 'canStartWhen', options: ['D…ôrhal (1-3 g√ºn)', '1 h…ôft…ô …ôrzind…ô', '2 h…ôft…ô …ôrzind…ô', '1 ay …ôrzind…ô'] },
            { text: 'Vaxtƒ±nda i≈ü…ô g…ôlm…ôy…ô …ômin siniz?', type: 'buttons', field: 'isPunctual', options: ['B…ôli, h…ômi≈ü…ô', 'B…ôz…ôn gecikm…ô ola bil…ôr'] },
            { text: 'Referans ver…ô bil…ôc…ôk ke√ßmi≈ü r…ôhb…ôr var?', type: 'buttons', field: 'hasReference', options: ['B…ôli', 'Xeyr'] },
            
            { text: '∆èla! CV-niz hazƒ±rdƒ±r! üéâ<br><br>≈ûirk…ôtl…ôr sizinl…ô …ôlaq…ô saxlayacaq.', type: 'success' }
        ];

        function updateProgress() {
            const progressFill = document.querySelector('.progress-fill');
            const progressText = document.querySelector('.progress-text');
            const percentage = (currentQuestion / questions.length) * 100;
            progressFill.style.width = percentage + '%';
            progressText.textContent = `Sual ${currentQuestion} / ${questions.length}`;
        }

        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'message user-message' : 'message';
            
            messageDiv.innerHTML = `
                <div class="avatar">${isUser ? 'üë§' : 'N'}</div>
                <div class="message-content">
                    <div class="message-text">${text}</div>
                </div>
            `;
            
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message typing';
            typingDiv.innerHTML = `
                <div class="avatar">N</div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            chatArea.appendChild(typingDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
            return typingDiv;
        }

        function showQuestion(questionIndex) {
            if (questionIndex >= questions.length) return;

            const question = questions[questionIndex];
            const typingIndicator = addTypingIndicator();

            setTimeout(() => {
                typingIndicator.remove();

                if (question.type === 'success') {
                    showSuccessScreen();
                    return;
                }

                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                
                let optionsHTML = '';
                
                if (question.type === 'buttons') {
                    const gridClass = question.options.length <= 2 ? 'button-grid single-col' : 'button-grid';
                    optionsHTML = `<div class="${gridClass}">`;
                    question.options.forEach(option => {
                        optionsHTML += `<button class="option-btn" onclick="handleButtonClick('${option}', '${question.field}')">${option}</button>`;
                    });
                    optionsHTML += '</div>';
                } else if (question.type === 'checkboxes') {
                    optionsHTML = '<div class="checkbox-grid">';
                    question.options.forEach(option => {
                        optionsHTML += `<button class="checkbox-btn" onclick="toggleCheckbox(this, '${option}')">${option}</button>`;
                    });
                    optionsHTML += '</div>';
                    optionsHTML += `<div style="margin-top: 16px;"><button class="option-btn" style="width: 100%;" onclick="submitCheckboxes('${question.field}')">Davam et ‚û§</button></div>`;
                }
                
                messageDiv.innerHTML = `
                    <div class="avatar">N</div>
                    <div class="message-content">
                        <div class="message-text">
                            ${question.text}
                            ${optionsHTML}
                        </div>
                    </div>
                `;
                
                chatArea.appendChild(messageDiv);
                chatArea.scrollTop = chatArea.scrollHeight;

                userInput.placeholder = question.placeholder || 'Cavabƒ±nƒ±zƒ± yazƒ±n...';
            }, 1000);
        }

        function showSuccessScreen() {
            chatArea.innerHTML = `
                <div class="success-message">
                    <div class="success-icon">‚úì</div>
                    <div class="success-title">CV-niz Hazƒ±rdƒ±r!</div>
                    <div class="success-text">
                        T…ôbrikl…ôr! CV-niz uƒüurla yaradƒ±ldƒ±.<br>
                        ≈ûirk…ôtl…ôr sizi g√∂r…ô bil…ôc…ôk v…ô …ôlaq…ô saxlayacaq.
                    </div>
                    <button class="download-btn" onclick="downloadPDF()">
                        <span>üì•</span>
                        CV-ni Y√ºkl…ô (PDF)
                    </button>
                </div>
            `;
            document.querySelector('.input-area').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
        }

        window.toggleCheckbox = function(btn, value) {
            btn.classList.toggle('checked');
            if (btn.classList.contains('checked')) {
                selectedCheckboxes.push(value);
            } else {
                selectedCheckboxes = selectedCheckboxes.filter(v => v !== value);
            }
        };

        window.submitCheckboxes = function(field) {
            if (selectedCheckboxes.length === 0) {
                alert('∆èn azƒ± bir se√ßim edin');
                return;
            }
            const answer = selectedCheckboxes.join(', ');
            cvData[field] = selectedCheckboxes.slice();
            
            addMessage(answer, true);
            selectedCheckboxes = [];
            currentQuestion++;
            updateProgress();
            setTimeout(() => showQuestion(currentQuestion - 1), 500);
        };

        window.handleButtonClick = function(value, field) {
            cvData[field] = value;
            addMessage(value, true);
            currentQuestion++;
            updateProgress();
            setTimeout(() => showQuestion(currentQuestion - 1), 500);
        };

        function handleUserInput() {
            const value = userInput.value.trim();
            if (!value) return;

            const currentQ = questions[currentQuestion - 1];
            if (currentQ.field) {
                cvData[currentQ.field] = value;
            }

            addMessage(value, true);
            userInput.value = '';
            currentQuestion++;
            updateProgress();
            
            setTimeout(() => showQuestion(currentQuestion - 1), 500);
        }

        sendBtn.addEventListener('click', handleUserInput);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleUserInput();
            }
        });

        // HR Fit Score Calculator
        function calculateHRFitScore() {
            let score = 0;
            let flags = [];

            // Positive indicators
            if (cvData.skills.length >= 3) score += 30;
            if (cvData.workDuration === '1-2 il' || cvData.workDuration === '2+ il') score += 25;
            if (cvData.canStartWhen === 'D…ôrhal (1-3 g√ºn)' || cvData.canStartWhen === '1 h…ôft…ô …ôrzind…ô') {
                score += 20;
                flags.push('T…ôcili ba≈ülaya bil…ôr');
            }
            if (cvData.isPunctual === 'B…ôli, h…ômi≈ü…ô') score += 15;
            if (cvData.hasReference === 'B…ôli') score += 10;

            // Risk indicators
            if (cvData.workDuration === 'T…ôcr√ºb…ôm yox' || cvData.workDuration === '6 aydan az') {
                score -= 15;
                flags.push('Az t…ôcr√ºb…ô');
            }
            if (cvData.isPunctual === 'B…ôz…ôn gecikm…ô ola bil…ôr') {
                score -= 10;
                flags.push('Gecikm…ô riski');
            }

            // Determine badge
            let badge = '';
            if (score >= 60) {
                badge = '‚úÖ Uyƒüundur';
            } else if (score >= 40) {
                badge = '‚ö†Ô∏è Orta';
            } else {
                badge = '‚ö†Ô∏è Riskli';
            }

            return { score, badge, flags };
        }

        window.downloadPDF = function() {
            const fitData = calculateHRFitScore();
            const currentYear = new Date().getFullYear();
            const age = cvData.birthYear ? currentYear - parseInt(cvData.birthYear) : 'N/A';

            const cvContainer = document.createElement('div');
            cvContainer.style.cssText = `
                position: fixed;
                left: -9999px;
                width: 210mm;
                background: white;
                padding: 30px;
                font-family: 'Manrope', Arial, sans-serif;
            `;
            
            cvContainer.innerHTML = `
                <div style="text-align: right; margin-bottom: 15px;">
                    <span style="background: ${fitData.badge.includes('‚úÖ') ? '#10B981' : '#F59E0B'}; 
                                 color: white; 
                                 padding: 8px 16px; 
                                 border-radius: 8px; 
                                 font-size: 14px; 
                                 font-weight: 700;">
                        ${fitData.badge}
                    </span>
                </div>

                <div style="background: linear-gradient(135deg, #0066FF 0%, #0052CC 100%); 
                            padding: 25px; 
                            margin: -30px -30px 25px -30px; 
                            color: white;">
                    <h1 style="font-size: 28px; margin: 0 0 8px 0; font-weight: 700;">
                        ${cvData.fullName || 'Ad Soyad'}
                    </h1>
                    <p style="margin: 0; font-size: 15px; opacity: 0.95;">
                        ${cvData.desiredRoles.join(' / ') || 'V…ôzif…ô'} ‚Ä¢ ${age} ya≈ü ‚Ä¢ ${cvData.phone || 'Telefon'}
                    </p>
                    <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.9;">
                        üìç ${cvData.district} ‚Ä¢ ${cvData.hasWhatsApp === 'B…ôli' ? '‚úÖ WhatsApp' : ''}
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <h3 style="color: #0066FF; font-size: 14px; margin: 0 0 8px 0; font-weight: 700;">
                            ƒ∞≈û∆è BA≈ûLAMA
                        </h3>
                        <p style="margin: 0; font-size: 13px; font-weight: 600;">
                            ${cvData.canStartWhen || 'N/A'}
                        </p>
                    </div>
                    <div>
                        <h3 style="color: #0066FF; font-size: 14px; margin: 0 0 8px 0; font-weight: 700;">
                            MAA≈û G√ñZL∆èNTƒ∞Sƒ∞
                        </h3>
                        <p style="margin: 0; font-size: 13px; font-weight: 600;">
                            ${cvData.minSalary} AZN
                        </p>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h2 style="color: #0066FF; font-size: 16px; margin: 0 0 10px 0; font-weight: 700; 
                               border-bottom: 2px solid #0066FF; padding-bottom: 5px;">
                        AXTARDIƒûI V∆èZƒ∞F∆è
                    </h2>
                    <p style="margin: 0 0 8px 0; font-size: 14px;">
                        <strong>${cvData.desiredRoles.join(', ') || 'N/A'}</strong>
                    </p>
                    <p style="margin: 0; font-size: 13px; color: #6B7280;">
                        ${cvData.workType} ‚Ä¢ N√∂vb…ôl…ôr: ${cvData.preferredShifts.join(', ')}
                    </p>
                </div>

                <div style="margin-bottom: 20px;">
                    <h2 style="color: #0066FF; font-size: 16px; margin: 0 0 10px 0; font-weight: 700; 
                               border-bottom: 2px solid #0066FF; padding-bottom: 5px;">
                        ƒ∞≈û T∆èCR√úB∆èSƒ∞
                    </h2>
                    ${cvData.previousWorkplace ? `
                    <p style="margin: 0 0 5px 0; font-size: 14px;">
                        <strong>${cvData.previousRole}</strong> - ${cvData.previousWorkplace}
                    </p>
                    <p style="margin: 0 0 5px 0; font-size: 13px; color: #6B7280;">
                        M√ºdd…ôt: ${cvData.workDuration}
                    </p>
                    <p style="margin: 0; font-size: 13px; color: #6B7280;">
                        Ayrƒ±lma s…ôb…ôbi: ${cvData.leavingReason}
                    </p>
                    ` : `
                    <p style="margin: 0; font-size: 14px;">
                        ${cvData.workDuration}
                    </p>
                    `}
                </div>

                <div style="margin-bottom: 20px;">
                    <h2 style="color: #0066FF; font-size: 16px; margin: 0 0 10px 0; font-weight: 700; 
                               border-bottom: 2px solid #0066FF; padding-bottom: 5px;">
                        BACARIQLAR
                    </h2>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        ${cvData.skills.map(skill => `
                            <span style="background: #E8F4F8; 
                                         color: #0066FF; 
                                         padding: 6px 12px; 
                                         border-radius: 6px; 
                                         font-size: 12px; 
                                         font-weight: 600;">
                                ‚úì ${skill}
                            </span>
                        `).join('')}
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <h3 style="color: #0066FF; font-size: 14px; margin: 0 0 8px 0; font-weight: 700;">
                            Dƒ∞L Bƒ∞Lƒ∞KL∆èRƒ∞
                        </h3>
                        <p style="margin: 0; font-size: 13px;">
                            Az…ôrbaycan: ${cvData.azerbaijaniLevel}<br>
                            Rus: ${cvData.russianLevel}
                        </p>
                    </div>
                    <div>
                        <h3 style="color: #0066FF; font-size: 14px; margin: 0 0 8px 0; font-weight: 700;">
                            S∆èN∆èDL∆èR
                        </h3>
                        <p style="margin: 0; font-size: 13px;">
                            ≈û/V: ${cvData.hasID}<br>
                            H…ôrbi: ${cvData.militaryStatus}
                        </p>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h2 style="color: #0066FF; font-size: 16px; margin: 0 0 10px 0; font-weight: 700; 
                               border-bottom: 2px solid #0066FF; padding-bottom: 5px;">
                        Fƒ∞Zƒ∞Kƒ∞ QABILIYY∆èT V∆è N√ñVB∆è
                    </h2>
                    <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                        ${cvData.canStandLong === 'B…ôli' ? '‚úÖ' : '‚ùå'} Uzun m√ºdd…ôt ayaqda i≈ül…ôy…ô bilir<br>
                        ${cvData.canLiftHeavy === 'B…ôli' ? '‚úÖ' : '‚ùå'} Aƒüƒ±r y√ºk qaldƒ±ra bilir<br>
                        ${cvData.acceptsNightShift === 'B…ôli' ? '‚úÖ' : cvData.acceptsNightShift === 'B…ôz…ôn' ? '‚ö†Ô∏è' : '‚ùå'} Gec…ô n√∂vb…ôsi: ${cvData.acceptsNightShift}
                    </p>
                </div>

                <div style="margin-bottom: 20px;">
                    <h2 style="color: #0066FF; font-size: 16px; margin: 0 0 10px 0; font-weight: 700; 
                               border-bottom: 2px solid #0066FF; padding-bottom: 5px;">
                        ETƒ∞BARLILIQ
                    </h2>
                    <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                        Vaxtƒ±nda g…ôlm…ô: ${cvData.isPunctual}<br>
                        Referans: ${cvData.hasReference}<br>
                        Ail…ô: ${cvData.familyStatus}
                    </p>
                </div>

                ${fitData.flags.length > 0 ? `
                <div style="background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 12px; margin-bottom: 20px;">
                    <p style="margin: 0; font-size: 12px; color: #92400E; font-weight: 600;">
                        HR Qeydl…ôri: ${fitData.flags.join(', ')}
                    </p>
                </div>
                ` : ''}

                <div style="text-align: center; margin-top: 25px; padding-top: 15px; border-top: 1px solid #E5E7EB;">
                    <p style="color: #9CA3AF; font-size: 11px; margin: 0;">
                        Nexthire.com vasit…ôsil…ô yaradƒ±lƒ±b ‚Ä¢ ${new Date().toLocaleDateString('az-AZ')}
                    </p>
                </div>
            `;
            
            document.body.appendChild(cvContainer);
            
            html2canvas(cvContainer, {
                scale: 2,
                useCORS: true,
                logging: false,
                backgroundColor: '#ffffff'
            }).then(canvas => {
                const { jsPDF } = window.jspdf;
                const imgData = canvas.toDataURL('image/png');
                
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                const imgWidth = 210;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                
                const fileName = `${cvData.fullName.replace(/\s+/g, '_')}_CV.pdf`;
                pdf.save(fileName);
                
                document.body.removeChild(cvContainer);
            }).catch(error => {
                console.error('PDF error:', error);
                document.body.removeChild(cvContainer);
                alert('X…ôta ba≈ü verdi. Yenid…ôn c…ôhd edin.');
            });
        };

        updateProgress();
    </script>
</body>
</html>